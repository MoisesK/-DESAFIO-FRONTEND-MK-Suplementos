<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MK Suplementos</title>

    <link rel="stylesheet" href="src/css/mobile/global.css">
    <link rel="stylesheet" href="src/css/mobile/header.css">
    <link rel="stylesheet" href="src/css/mobile/footer.css">
    <link rel="stylesheet" href="src/css/mobile/nav-bar.css">
    <link rel="stylesheet" href="src/css/mobile/schedule/product-card.css">
    <link rel="stylesheet" href="src/css/mobile/schedule/service-tax.css">
    <link rel="stylesheet" href="src/css/mobile/schedule/schedule-form.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/eb9613833e.js" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
</head>
<body>
<section id="platform-content">
    <section id="navbar">
        <div class="nav-header">
            <img class="avatar" src="src/images/avatar.jpg">
            <div class="title"><h3>Olá, visitante</h3></div>
        </div>
        <div class="nav-content">
            <a href="/index.html"><i class="fa-solid fa-home"></i>Home</a>
            <a href="#"><i class="fa-solid fa-user"></i>Minha Conta</a>
            <a href="#"><i class="fa fa-shopping-cart"></i>Meus Pedidos</a>
        </div>
    </section>
    <section id="overlay"></section>
    <header>
        <section class="header container">
            <div class="logo">
                <button id="mobile-menu" class="material-symbols-outlined" onclick="showMenu()">menu</button>
                <h1>Espaço Divas</h1>
                <button id="mobile-cart-icon" class="material-symbols-outlined">shopping_cart</button>
            </div>
        </section>
    </header>

    <main>
        <section class="general-info">
            <section id="cart-card" class="container cart-card">
                <div class="title-cart">
                    <h3>
                        <i class="fa fa-shopping-cart"></i>
                              Carrinho de serviços</h3>
                <hr>
                </div>
                <div class="cart-items">
                    <div class="product-card">
                        <div class="image">
                            <img src="src/images/mechas.jpeg" alt="banner" >
                        </div>
                        <div class="card-details">
                            <div class="container informations"><h3>MECHA NA TOUCA</h3></div>
                            <div class="container money-info">
                                <div class="monetary">
                                    <span class="amount-value">R$ 500,00</span>
                                    <span class="amount-sufix">(a partir)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="image">
                            <img src="src/images/mechas.jpeg" alt="banner" >
                        </div>
                        <div class="card-details">
                            <div class="container informations"><h3>MECHA NA TOUCA</h3></div>
                            <div class="container money-info">
                                <div class="monetary">
                                    <span class="amount-value">R$ 500,00</span>
                                    <span class="amount-sufix">(a partir)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="image">
                            <img src="src/images/mechas.jpeg" alt="banner" >
                        </div>
                        <div class="card-details">
                            <div class="container informations"><h3>MECHA NA TOUCA</h3></div>
                            <div class="container money-info">
                                <div class="monetary">
                                    <span class="amount-value">R$ 500,00</span>
                                    <span class="amount-sufix">(a partir)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </section>

        <section id="loading" class="container hidden"></section>

        <form id="regForm" class="container" action="">
            <section class="container" style="text-align: center; border-bottom: 1px var(--gray-color) solid;">
                <span class="medium-text" style=>Dados para o agendamento:</span>
            </section>

            <div class="tab">
                <div class="heading-text">
                    <span class="small-text">Escolha a data que deseja realizar seu agendamento!</span>
                </div>
                <div class="date-picker">
                    <input id="schedule-date" type="datetime-local" name="schedule-date" />
                </div>

                <div class="heading-text">
                    <span class="small-text">Preencha com seus dados, para validação do agendamento!</span>
                </div>
                <div class="customer-data">
                    <div class="field-input">
                        <label for="schedule-customer-name">Nome:</label>
                        <input id="schedule-customer-name" type="text" name="schedule-name" placeholder="fulano de tal"/>
                    </div>
                    <div class="field-input">
                        <label for="schedule-customer-email">Email:</label>
                        <input id="schedule-customer-email" type="text" placeholder="email@email.com" name="schedule-email" />
                    </div>
                    <div class="field-input">
                    <label for="schedule-customer-phone">Telefone:</label>
                    <input id="schedule-customer-phone" type="text" placeholder="(85) 99999-9999" maxlength="15" name="schedule-phone" />
                </div>
                </div>
            </div>

            <div class="tab">
                <div class="qr-step">
                    <div class="text-section">
                        <h3 class="medium-text">Realize o pagamento no valor</h3>
                        <h3 class="medium-text amount-value">R$ 250,00</h3>
                    </div>
                    <div class="qr-content">
                        <img src="src/images/qrcode.png">
                        <div class="copy-section">
                            <span id="copy-paste-pix-action"><i class="fa fa-clipboard"></i></span>
                            <input id="copy-paste-pix-value" class="copy-paste-pix" value="A PIKA DO VOVO NÃO SOBE MAAAAIS" disabled>
                        </div>
                    </div>
                    <div>
                        <ol>
                            <li>
                                Abra o app do seu banco ou instituição
                                financeira e entre no ambiente Pix.
                            </li>
                            <li>
                                Escolha a opção pagar com qr code e escaneie ou utilize a opção copia e cola
                                o código.
                            </li>
                            <li>
                                Confirme as informações, faça o pagamento e salve o comprovante.
                            </li>
                            <li>
                                Anexe o comprovante e prossiga com as etapas do agendamento.
                            </li>
                        </ol>
                    </div>
                    <div>
                        <div class="proof-file-input">
                            <input type="file">
                        </div>
                    </div>
                </div>
            </div>

            <div style="overflow:auto;">
                <div style="float:right;">
                    <button type="button" id="prevBtn" onclick="nextPrev(-1)">Anterior</button>
                    <button type="button" id="nextBtn" onclick="nextPrev(1)">Próximo</button>
                </div>
            </div>

            <!-- Circles which indicates the steps of the form: -->
            <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
            </div>
        </form>

        <section id="proof-file-received" class="hidden">
            <div class="container congratulations">
                <div class="congrats">
                    <span class="medium-text">Parabéns, comprovante recebido!</span>
                    <img src="src/images/receive-payment.png">
                    <span class="small-text">Recebemos o seu comprovante de pagamento e os dados do seu agendamento!</span>
                    <span class="small-text">Nosso prazo para validação do comprovante de pagamento é de até 12 horas após o envio do comprovante.</span>
                    <span class="small-text">Não se preocupe o seu horário já está agendado, somente a invalidez do comprovante de pagamento ou dos dados informados podem retirá-lo de você.</span>
                </div>
            </div>
            <div class="container congratulations">
                <div class="confirm-whatsapp">
                    <span class="medium-text">Sem paciência para aguardar as 12 horas?!</span>
                    <span class="small-text">Que tal "agilizar" o processo de analise ? </span>
                    <span class="small-text">Clique no botão abaixo e entre em contato diretamente com nosso whatsapp!</span>
                    <button id="whatsapp-confirm" class="action-button">Confirmar via Whatsapp</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="container">
        <section class="navigation">
            <a><span>Termos e Serviço</span></a>
            <a><span>Política de Privacidade</span></a>
            <a ><span onclick="cancelTerm()">Cancelamento e reembolso</span></a>
            <div id="cancel-term" class="cancel-term">
                <h1>Política de Cancelamento de Serviço</h1>
                <p>Agradecemos por escolher nossos serviços. Para garantir uma experiência justa e transparente, estabelecemos a seguinte política de cancelamento:</p>

                <h2>Prazo para Cancelamento</h2>
                <p>O cliente pode solicitar o cancelamento do serviço até 2 (dois) dias antes da data programada. Cancelamentos feitos dentro desse prazo não serão reembolsados.</p>

                <h2>Reembolso</h2>
                <p>O reembolso será efetuado apenas se o cancelamento for realizado dentro do prazo estabelecido. O valor total pago será reembolsado em até 7 (sete) dias úteis após a confirmação do cancelamento.</p>

                <h2>Exceções</h2>
                <p>Não haverá reembolso em casos de não comparecimento ou cancelamentos feitos após o prazo de 2 dias.</p>

                <h2>Alterações de Data</h2>
                <p>Caso o cliente deseje alterar a data do serviço, essa solicitação deve ser feita com pelo menos 2 (dois) dias de antecedência. Faremos o possível para atender a nova data solicitada, sujeita à disponibilidade.</p>

            </div>
        </section>

        <section class="newsletter">
            <form id="newsletter-subcription">
                <label for="newsletter-mail">Promoções</label>
                <div class="input">
                    <input type="email" id="newsletter-mail" class="input-entry" placeholder="Digite seu melhor email">
                    <button id="newsletter-subscription-button" form="newsletter-subcription" type="submit">Inscrever</button>
                </div>
            </form>
        </section>
        <section class="hours-work">
            <span class="title">Horário de Funcionamento</span>
            <span class="info">Segunda a Sexta: 08:00 - 19:00</span>
            <span class="info">Sábado: 08:00 - 17:00</span>
        </section>
        <section class="container medias">
            <div class="social">
                <a><i class="fa-brands fa-instagram"></i></a>
                <a href="https://api.whatsapp.com/send/?phone=5585985473412&text=Ola%2C%20Espa%C3%A7o%20divas.%20Vim%20pelo%20site%20e%20gostaria%20de%20algumas%20informa%C3%A7%C3%B5es." target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
            </div>

            <div class="payments">
                <img src="src/images/metodos-pagamento.webp">
            </div>
        </section>
    </footer>
</section>

<section id="toast"></section>

<script src="src/js/populate-products.js"></script>
<script src="src/js/functions.js"></script>
<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the current tab

    function showTab(n) {
        // This function will display the specified tab of the form ...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        // ... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = "Finalizar";
            document.getElementById("nextBtn").classList.toggle('last-step');
        } else {
            document.getElementById("nextBtn").innerHTML = "Próximo";
        }
        // ... and run a function that displays the correct step indicator:
        fixStepIndicator(n)
    }

    function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form... :
        if (currentTab >= x.length) {
            const event = new CustomEvent('submitForm');
            document.getElementById("regForm").dispatchEvent(event);
            return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
    }

    function validateForm() {
        // This function deals with validation of the form fields
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
            // If a field is empty...
            if (y[i].value == "") {
                // add an "invalid" class to the field:
                y[i].className += " invalid";
                // and set the current valid status to false:
                valid = false;
            }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        return valid; // return the valid status
    }

    function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i, x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class to the current step:
        x[n].className += " active";
    }

    document.getElementById("regForm")
        .addEventListener('submit', (e) => e.preventDefault());

    document.getElementById("regForm").addEventListener('submitForm', (e) => {
        e.preventDefault();
        const form = document.getElementById('regForm');
        form.style.display = 'none';

        const loadingSection = document.getElementById('loading');
        loadingSection.appendChild(makeLoading());
        loadingSection.classList.toggle('hidden');

        setTimeout(() => {
            loadingSection.classList.toggle('hidden');
            document.getElementById('proof-file-received').classList.toggle('hidden');
            document.getElementById('cart-card').classList.toggle('hidden');
        }, 4000)
    });

    document.getElementById('schedule-customer-phone').addEventListener('keypress', (e) => {
        e.target.value = applyNumberMask(e.target.value, '(##) #####-####')
    })

    document.getElementById('copy-paste-pix-action').addEventListener('click', (e) => {
        const pixCopyPaste = document.getElementById('copy-paste-pix-value').value;
        navigator.clipboard.writeText(pixCopyPaste);
    })

    document.getElementById('whatsapp-confirm').addEventListener('click', (e) => {
        toast('Abrindo whatsapp da companhia!', 'success');
        setInterval(() => {
            window.open('https://api.whatsapp.com/send/?phone=5585985473412&text=Ol%C3%A1%2C%20acabei%20de%20realizar%20o%20pagamento%20do%20agendamento%20de%20um%20procedimento%20de%20MECHA%20NA%20TOUCA%20que%20possui%20o%20valor%20de%20R%24%20500%2C00.%20Gostaria%20de%20enviar%20meu%20comprovante%20de%20pagamento%20por%20aqui%20tamb%C3%A9m%20para%20agilizar%20a%20valida%C3%A7%C3%A3o%20e%20a%20confirma%C3%A7%C3%A3o%20do%20pagamento%20de%20R%24%20250%2C00%20do%20pr%C3%A9-agendamento,%20', '_blank');
        }, 3000)
    })

    document.getElementById('overlay').addEventListener('click', (e) => hiddenMenu());

    // })
</script>
</body>
</html>