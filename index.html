<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MK Suplementos</title>

    <link rel="stylesheet" href="src/css/mobile/style.css">
    <link rel="stylesheet" href="src/css/mobile/header.css">
    <link rel="stylesheet" href="src/css/mobile/products.css">
    <link rel="stylesheet" href="src/css/mobile/items.css">
    <link rel="stylesheet" href="src/css/mobile/footer.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/eb9613833e.js" crossorigin="anonymous"></script>

    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
</head>
<body>
    <header>
      <section class="header container">
          <div class="logo">
              <button id="mobile-menu" class="material-symbols-outlined">menu</button>
              <h1><i class="fa-solid fa-star"></i>MK Suplementos</h1>
              <button id="mobile-cart-icon" class="material-symbols-outlined">shopping_cart</button>
          </div>
          <div class="filter">
              <div class="search-form">
                  <form>
                      <input id="filter-input" placeholder="Pesquisar produto">
                      <button id="filter-search" class="material-symbols-outlined">search</button>
                  </form>
              </div>
          </div>
      </section>
    </header>
  <main>
      <section id="carrousel" class="banner-section">
          <div class="swiper">
              <div class="swiper-wrapper">
                  <img class="swiper-slide" src="src/images/banner.jpeg" alt="banner" >
                  <img class="swiper-slide" src="src/images/banner2.jpg" alt="banner" >
              </div>
          </div>
      </section>

      <section class="container products">
          <div class="informations">
              <h3>PROMOÇÕES</h3>
          </div>
          <div id="items-count" class="items-count"></div>
      </section>

      <section class="container items-content">
          <div id="items-content" class="content"></div>
      </section>
  </main>
  <footer class="container">
      <section class="navigation">
          <a><span>Contato</span></a>
          <a><span>Termos e Serviço</span></a>
          <a><span>Política de Privacidade</span></a>
          <a><span>Cancelamento, troca e reembolso</span></a>
      </section>

      <section class="newsletter">
          <form id="newsletter-subcription">
                <label for="newsletter-mail">Newsletter</label>
              <div class="input">
                  <input type="email" id="newsletter-mail" class="input-entry" placeholder="Digite seu melhor email">
                  <button id="newsletter-subscription-button" form="newsletter-subcription" type="submit">Inscrever</button>
              </div>
          </form>
      </section>
      <section class="container medias">
          <div class="social">
              <i class="fa-brands fa-instagram"></i>
              <i class="fa-brands fa-square-facebook"></i>
          </div>

          <div class="payments">
              <img src="src/images/metodos-pagamento.webp">
          </div>
      </section>
  </footer>

    <section id="toast"></section>

    <script src="src/js/populate-products.js"></script>
    <script src="src/js/functions.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loading = makeLoading();

            const itemsContentDiv = document.getElementById('items-content');
            itemsContentDiv.appendChild(loading);

            document.getElementById('newsletter-subscription-button').addEventListener('click', (e) => {
                e.preventDefault();
                const email = document.getElementById('newsletter-mail');

                if (email.value.length == 0) {
                    email.style.border = '2px red solid';

                    toast('Campo de email não pode está vazio!');
                    return;
                }

                if (!validateEmail(email.value)) {
                    email.style.border = '2px red solid';
                    email.style.borderRight = 'none';

                    toast('Email informado está no formato inválido.');

                    return;
                }

                email.style.border = 'darkgray solid 1pt';

                toast(`O email '${email.value}' foi inscrito em nossa newsletter!`, 'success');

                email.value = '';
            })

            document.getElementById('filter-search').addEventListener('click', (e) => {
                e.preventDefault();
                itemsContentDiv.innerHTML = '';

                itemsContentDiv.appendChild(loading);

                const input = document.getElementById('filter-input');

                searchProduct(input.value).then((r) => {
                    itemsContentDiv.removeChild(loading)
                    const contentSection = document.getElementById('items-content');

                    r.forEach((d) => contentSection.appendChild(makeItemRender(d)))

                    const itensCount = document.getElementById('items-count')
                    itensCount.innerHTML = `<h3>${r.length} Encontrados</h3>`;
                });
            })


            populateProducts().then((r) => {
                itemsContentDiv.removeChild(loading)
                const contentSection = document.getElementById('items-content');

                r.forEach((d) => contentSection.appendChild(makeItemRender(d)))

                const itensCount = document.getElementById('items-count')
                itensCount.innerHTML = `<h3>${r.length} Produtos</h3>`;

            });

            const swiper = new Swiper('.swiper', {
                direction: 'horizontal',
                loop: true,
                autoplay: {
                    delay: 8000,
                },
                height: 800
            });
        })
    </script>
</body>
</html>