<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MK Suplementos</title>
    <link rel="stylesheet" type="text/css" href="src/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/eb9613833e.js" crossorigin="anonymous"></script>

    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
</head>
<body>
  <main>
    <header>
      <div class="header-logo">
        <h1>
          <i class="fa-solid fa-star"></i>
          MK Suplementos
        </h1>
      </div>
      <div class="header-icons">
        <button class="material-symbols-outlined">person</button>
        <button class="material-symbols-outlined">shopping_cart</button>
      </div>
    </header>
    
    <section id="carrousel" class="banner-section">
      <div class="swiper">
          <div class="swiper-slide">
            <img src="src/images/banner.jpeg" alt="banner" >
          </div>
          <div class="swiper-slide">
            <img src="src/images/banner2.jpg" alt="banner" >
          </div>
      </div>
    </section>

    <section class="promotion">
      <div class="container header-content">
        <div>
          <p><b>PROMOÇÕES</b></p>
        </div>

        <div class="product-filter">
          <p class="product-count">9 produtos</p>
          <div class="filter">
            <input id="filter-input" class="input-entry" placeholder="Digite o nome do produto">
            <button id="filter-search" class="material-symbols-outlined">search</button>
          </div>
        </div>
      </div>

      <div class="product-filter-mobile">
        <div>
          <input id="filter-input-mobile" class="input-entry" placeholder="Digite o nome do produto">
        </div>
        <div>
          <button id="filter-search-mobile" class="material-symbols-outlined">search</button>
        </div>
      </div>

      <hr>
      <div id="items-content" class="container items-content"></div>
    </section>
  </main>
  <hr>

  <footer>
    <section class="footer-navigation">
      <div class="container nav">
        <a><span>Contato</span></a>
        <a><span>Termos e Serviço</span></a>
        <a><span>Política de Privacidade</span></a>
        <a><span>Cancelamento, troca e reembolso</span></a>
      </div>

      <div class="container newsletter">
        <form id="newsletter-subcription">
          <div class="input">
            <label for="newsletter-mail">Newsletter</label>
            <input type="email" id="newsletter-mail" class="input-entry" placeholder="Digite seu melhor email">
          </div>
          <button id="newsletter-subscription-button" form="newsletter-subcription" type="submit">Inscrever</button>
        </form>
      </div>
    </section>

    <hr>


    <section class="container footer-social">
      <div class="media">
        <i class="fa-brands fa-instagram"></i>
        <i class="fa-brands fa-square-facebook"></i>
      </div>

      <div class="payments">
        <img src="src/images/metodos-pagamento.webp">
      </div>
    </section>
  </footer>

  <script src="src/js/populate-products.js"></script>
  <script src="src/js/functions.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const loading = makeLoading();

    const itemsContentDiv = document.getElementById('items-content');
    itemsContentDiv.appendChild(loading);

    document.getElementById('newsletter-subscription-button').addEventListener('click', (e) => {
      e.preventDefault();
      const email = document.getElementById('newsletter-mail');

      if (email.value.length == 0) {
        email.style.border = '2px red solid';

        alert('Campo de email não pode está vazio!');
        return;
      }

      if (!validateEmail(email.value)) {
        email.style.border = '2px red solid';
        email.style.borderRight = 'none';

        alert('Email inválido');
        return;
      }

      email.style.border = 'darkgray solid 1pt';

      alert(`O email '${email.value}' foi inscrito em nossa newsletter!`);

      email.value = '';
    })

    document.getElementById('filter-search').addEventListener('click', (e) => {
      e.preventDefault();
      itemsContentDiv.innerHTML = '';

      itemsContentDiv.appendChild(loading);

      const input = document.getElementById('filter-input');

      searchProduct(input.value).then((data) => {
        itemsContentDiv.removeChild(loading)
        const contentSection = document.getElementById('items-content');

        data.forEach((d) => {
          const itemDiv = document.createElement('div');
          itemDiv.classList.add('item');

          const itemImg = document.createElement('img');
          itemImg.src = d.image;

          const itemH3 = document.createElement('h3');
          itemH3.innerText = d.name;

          itemDiv.appendChild(itemImg);
          itemDiv.appendChild(itemH3);

          const monetaryDiv = document.createElement('div');
          monetaryDiv.classList.add('monetary-info');

          const monetarySufix = document.createElement('p');
          monetarySufix.innerText = d.sufix;

          const monetaryValue = document.createElement('p');
          monetaryValue.classList.add('value');
          monetaryValue.innerText = d.amount;

          const unitText = document.createElement('p');
          unitText.innerText = "(unidade)";
          unitText.classList.add('small-text');

          monetaryDiv.appendChild(monetarySufix);
          monetaryDiv.appendChild(monetaryValue);
          monetaryDiv.appendChild(unitText);

          itemDiv.appendChild(monetaryDiv);

          contentSection.appendChild(itemDiv);
        })
      });
    })

    document.getElementById('filter-search-mobile').addEventListener('click', (e) => {
      e.preventDefault();
      itemsContentDiv.innerHTML = '';

      itemsContentDiv.appendChild(loading);

      const input = document.getElementById('filter-input-mobile');

      searchProduct(input.value).then((data) => {
        itemsContentDiv.removeChild(loading)
        const contentSection = document.getElementById('items-content');

        data.forEach((d) => {
          const itemDiv = document.createElement('div');
          itemDiv.classList.add('item');

          const itemImg = document.createElement('img');
          itemImg.src = d.image;

          const itemH3 = document.createElement('h3');
          itemH3.innerText = d.name;

          itemDiv.appendChild(itemImg);
          itemDiv.appendChild(itemH3);

          const monetaryDiv = document.createElement('div');
          monetaryDiv.classList.add('monetary-info');

          const monetarySufix = document.createElement('p');
          monetarySufix.innerText = d.sufix;

          const monetaryValue = document.createElement('p');
          monetaryValue.classList.add('value');
          monetaryValue.innerText = d.amount;

          const unitText = document.createElement('p');
          unitText.innerText = "(unidade)";
          unitText.classList.add('small-text');

          monetaryDiv.appendChild(monetarySufix);
          monetaryDiv.appendChild(monetaryValue);
          monetaryDiv.appendChild(unitText);

          itemDiv.appendChild(monetaryDiv);

          contentSection.appendChild(itemDiv);
        })
      });
    })

    populateProducts().then((data) => {
      itemsContentDiv.removeChild(loading)
      const contentSection = document.getElementById('items-content');

      data.forEach((d) => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('item');

        const itemImg = document.createElement('img');
        itemImg.src = d.image;

        const itemH3 = document.createElement('h3');
        itemH3.innerText = d.name;

        itemDiv.appendChild(itemImg);
        itemDiv.appendChild(itemH3);

        const monetaryDiv = document.createElement('div');
        monetaryDiv.classList.add('monetary-info');

        const monetarySufix = document.createElement('p');
        monetarySufix.innerText = d.sufix;

        const monetaryValue = document.createElement('p');
        monetaryValue.classList.add('value');
        monetaryValue.innerText = d.amount;

        const unitText = document.createElement('p');
        unitText.innerText = "(unidade)";
        unitText.classList.add('small-text');

        monetaryDiv.appendChild(monetarySufix);
        monetaryDiv.appendChild(monetaryValue);
        monetaryDiv.appendChild(unitText);

        itemDiv.appendChild(monetaryDiv);

        contentSection.appendChild(itemDiv);
      })
    });

  })

  const swiper = new Swiper('.swiper', {
    direction: 'horizontal',
    loop: true,
    autoplay: {
      delay: 8000,
    }
  });
</script>
</body>
</html>